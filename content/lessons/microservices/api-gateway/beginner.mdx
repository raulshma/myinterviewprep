# API Gateway Pattern

Imagine you're staying at a fancy hotel. Do you call the kitchen directly for food, the housekeeping for towels, and the valet for your car? ğŸ¤” No! You call the **concierge** who handles everything for you!

## The Hotel Concierge Analogy ğŸ›ï¸

<ApiGatewaySimulator mode="beginner" />

| **Without API Gateway** ğŸ˜° | **With API Gateway** ğŸ˜Š |
| :--- | :--- |
| Client calls every service directly | Client calls ONE gateway |
| Client needs to know all addresses | Gateway knows where everything is |
| Each service handles authentication | Gateway handles it once |
| Complex for the client | Simple for the client |

<InfoBox type="tip">
  **API Gateway = Hotel Concierge** â€” One person (or service) who directs all your requests to the right place!
</InfoBox>

## What Does an API Gateway Do?

### 1. ğŸš¦ Routing (Traffic Cop)
Sends each request to the right service:

```
Client: "I want products"     â†’ Gateway â†’ Catalog Service
Client: "I want my orders"    â†’ Gateway â†’ Order Service
Client: "I want to pay"       â†’ Gateway â†’ Payment Service
```

### 2. ğŸ” Authentication (Security Guard)
Checks if you're allowed in **before** bothering the services:

```
Client: "Here's my ID badge" 
Gateway: "âœ… Valid! Come in."
Gateway â†’ Forwards requests to services
```

### 3. ğŸš« Rate Limiting (Bouncer)
Prevents too many requests from overwhelming services:

```
Client: 100 requests per second
Gateway: "Whoa! Slow down. Max 10/second please."
```

### 4. ğŸ§² Request Aggregation (Personal Shopper)
Gets data from multiple services in one call:

```
Client: "I need my profile AND my orders"
Gateway â†’ User Service (gets profile)
       â†’ Order Service (gets orders)
Gateway: "Here's everything in one response!"
```

## Without vs With API Gateway

### âŒ Without Gateway

```
Mobile App â”€â”€â”€â”€â”€â”€â–º User Service
          â””â”€â”€â”€â”€â”€â–º Order Service
          â””â”€â”€â”€â”€â”€â–º Catalog Service
          â””â”€â”€â”€â”€â”€â–º Payment Service

Problems:
- App needs 4 different URLs
- Each service needs its own security
- Hard to change services later
```

### âœ… With Gateway

```
Mobile App â”€â”€â”€â”€â”€â”€â–º API Gateway â”€â”€â”€â”€â”€â”€â–º User Service
                              â””â”€â”€â”€â”€â”€â–º Order Service
                              â””â”€â”€â”€â”€â”€â–º Catalog Service
                              â””â”€â”€â”€â”€â”€â–º Payment Service

Benefits:
- App needs only 1 URL
- Security handled once
- Easy to change services
```

## Real-World Examples

| Gateway | Used By | Purpose |
| :--- | :--- | :--- |
| Amazon API Gateway | AWS | Serverless API management |
| Kong | Many companies | Open-source, plugins |
| Ocelot | .NET apps | Built for .NET microservices |
| NGINX | Everywhere | Web server + gateway |

## Key Takeaways

- ğŸ›ï¸ **API Gateway = Single entry point** for all client requests
- ğŸš¦ **Routes** requests to the correct microservice
- ğŸ” **Handles security** so services don't have to
- ğŸš« **Rate limiting** protects services from overload
- ğŸ’¡ Makes life **easier for clients** (like a concierge!)

<ProgressCheckpoint section="ag-what-is-gateway" xpReward={25} />
